import{d as _,E as b,j as $,e as d,w as e,u as z,r as u,o as n,b as s,h as v,a as H,c as k,p as L,F as j,m as I,f as m,q as N,s as J,v as O,x as P,y as A,t as p}from"./index-C8NV8vGo.js";import{q as G}from"./run-CM8CnPLm.js";import"./request-CtygJrjG.js";import"./address-w6vdAG-M.js";function K(){const i=_([]);return{runRecord:i,fetchRunRecord:async(y,R)=>{i.value=[];try{const t=await G(y,R);t.data.code===1e4?t.data.response.length===0?i.value=[]:i.value=t.data.response.map(r=>({...r})):(b.error(t.data.msg),i.value=[])}catch(t){b.error("获取跑步记录出错: "+t.message)}}}}const Q={key:0,class:"loading-indicator"},Z={__name:"RunRecord",setup(i){const{runRecord:x,fetchRunRecord:y}=K(),R=_(JSON.parse(localStorage.getItem("userData"))||null),t=_([]),r=_(!1),w=_(1),B=_(15),C=z(),D=()=>{window.history.go(-1)},S=async()=>{r.value=!0,await y(w.value,B.value),r.value=!1,t.value=[...t.value,...x.value],t.value.length===0&&b.success("暂无跑步记录")},M=g=>{const{scrollTop:a,clientHeight:l,scrollHeight:c}=g.target;a+l>=c-10&&T()},T=()=>{r.value||(w.value+=1,S())},V=(g,a)=>{const l=g/(a/1e3),c=Math.floor(l),f=Math.round((l-c)*60);return`${c}'${f<10?"0":""}${f}''`};return $(()=>{R.value?S():C.push("/home")}),(g,a)=>{const l=u("el-icon"),c=u("el-result"),f=u("el-main"),h=u("el-descriptions-item"),q=u("el-descriptions"),E=u("el-button"),F=u("el-container");return n(),d(F,null,{default:e(()=>[r.value&&t.value.length===0?(n(),d(f,{key:0},{default:e(()=>[s(c,null,{"sub-title":e(()=>[s(l,{class:"is-loading"},{default:e(()=>[s(v(N))]),_:1})]),extra:e(()=>a[0]||(a[0]=[])),_:1})]),_:1})):(n(),d(f,{key:1},{default:e(()=>[H("div",{class:"scroll-container",onScroll:M},[(n(!0),k(j,null,L(t.value,o=>(n(),k("div",{key:o.recordId},[(n(),d(q,{class:"margin-top",key:o.recordId,column:1,border:""},{title:e(()=>[s(l,{style:J({color:o.defeatedInfo==="有效跑步"?"blue":"red"})},{default:e(()=>[(n(),d(O(o.defeatedInfo==="有效跑步"?v(P):v(A))))]),_:2},1032,["style"]),m(" "+p(o.defeatedInfo)+" - "+p(o.createTime),1)]),default:e(()=>[s(h,{label:"跑步时长"},{default:e(()=>[m(p(o.runTime)+" 分钟 ",1)]),_:2},1024),s(h,{label:"跑步里程"},{default:e(()=>[m(p((o.runDistance/1e3).toFixed(2))+" 公里 ",1)]),_:2},1024),s(h,{label:"平均配速"},{default:e(()=>[m(p(V(o.runTime,o.runDistance)),1)]),_:2},1024)]),_:2},1024))]))),128)),r.value?(n(),k("div",Q,[s(l,{class:"is-loading"},{default:e(()=>[s(v(N))]),_:1})])):I("",!0)],32),t.value.length===0?(n(),d(c,{key:0,icon:"success","sub-title":"暂无跑步记录"},{extra:e(()=>a[1]||(a[1]=[])),_:1})):I("",!0)]),_:1})),s(E,{onClick:D},{default:e(()=>a[2]||(a[2]=[m("返回")])),_:1})]),_:1})}}};export{Z as default};
